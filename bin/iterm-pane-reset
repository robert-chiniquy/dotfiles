#!/bin/bash
# Reset the current iTerm2 pane to black background
# Uses ITERM_SESSION_ID to target the correct pane

# ITERM_SESSION_ID format is "w0t0p0:UUID" - extract just the UUID
SESSION_ID="${ITERM_SESSION_ID##*:}"
if [ -z "$SESSION_ID" ]; then
    echo "Not in iTerm2"
    exit 1
fi

osascript -e "
tell application \"iTerm2\"
    repeat with w in windows
        repeat with t in tabs of w
            repeat with s in sessions of t
                if unique ID of s is \"$SESSION_ID\" then
                    set background color of s to {0, 0, 0}
                    set foreground color of s to {61680, 61680, 61680}
                    return
                end if
            end repeat
        end repeat
    end repeat
end tell
"
